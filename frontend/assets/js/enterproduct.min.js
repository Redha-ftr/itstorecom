"use strict";let cat_inf=$('[name="category-id"]').val(),subcat_inf=$('[name="subcategory-id"]').val(),brandid_inf="",orderby_inf="default",brand_inf=$('[name="brand-name"]').val(),stage_inf="mapping",keyword_inf=$('[name="keyword-inf"]').val(),search_inf=$('[name="search-inf"]').val(),tags_inf=$('[name="tag-inf"]').val(),segment_inf=$('[name="segment-inf"]').val(),nocontent=$('[name="nocontent-loader"]').val(),$product_end=$(".ps-product-end"),$product_loader=$(".ps-product-loader"),$product_status=$(".ps-product-status"),$product_recommended=$(".title-recommend-foryou"),$product_box_list=$(".product-box-list"),$product_wide_list=$(".product-wide-list"),$product_bestseller=$(".ps-best-seller"),$product_pagetitle=$(".page-product-title"),$container_bestseller=$(".ps-shop-bestseller"),$product_filter_mobile=$(".product--filter-mobile"),$show_all=$(".show-all"),$product_info=$(".product-info-search"),$skeleton_box=$product_box_list.html(),$skeleton_wide=$product_wide_list.html(),lastCategory=null,lastParent_inf=null,lastChild_inf=null,lastBrand=null,showall_inf=!1,_isFilter=!1,currentPage_inf=0,paging_inf=1,delay=[500,1e3,1500,2e3],fltr_cat_chk=["tags","search","official","brand"],none_best=["subcategory","tags","keyword","search","on-discount","new-arrival"],getdelay=Math.floor(Math.random()*delay.length),product_swiper=new Swiper(".product-swiper",{observer:!0,loop:!0,grabCursor:!0,lazy:{loadOnTransitionStart:!1,loadPrevNext:!0},slidesPerView:1,simulateTouch:!0,centeredSlides:!0,spaceBetween:5,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:15e3,disableOnInteraction:!1},breakpointsInverse:!0,breakpoints:{640:{slidesPerView:1.1,loopAdditionalSlides:1}}}),swiper_bestseller=new Swiper(".swiper-bestseller",{observer:!0,slidesPerView:1,simulateTouch:!0,lazy:{loadOnTransitionStart:!1,elementClass:"product-lazy",loadPrevNext:!0},autoplay:!1,breakpointsInverse:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:product_breakpoints(!0)}),change_stage=c=>{let a=["brand","tags"],b=jQuery.inArray(c,a);stage_inf=b> -1?a[b]:stage_inf},shop_enddata=(a="",d="list")=>{let b="",c="list"==d?"product_status":d;switch(a){case"end":b=`<h5 class="ps-product-end" id="${c}" data-value="${a}" >All items have been displayed</h5>`;break;case"not_found":$(".ps-list--orderby, .ps-list--orderby-mobile").addClass("d-none"),b=`<div class="shadow-lg py-3 ps-no-product row mt-5" style="border-radius: 10px;"><div class="col-md-3 col-12"><lottie-player src="${nocontent}" class="ps-product-loader lottie-loader w-100" background="transparent" speed="1" loop autoplay></lottie-player></div><div class="col-md-9 col-12 text-start p-3"><h3 class="display-4 text-muted">Hmmm, produk tidak ditemukan</h3><h4 class="fw-light text-muted mt-0" id="${c}" data-value="${a}">Coba kata kunci lain atau cek rekomendasi produk di bawah.</h4><button class="ps-btn btn-change-keyword">Ubah Kata Kunci</button></div></div>`,$product_pagetitle.html(decodeURIComponent(search_inf)),"recommend"!=orderby_inf&&search_recommended_product();break;case"timeout":b=`<center><button class="btn btn-danger ps-product-end text-white mt-10" id="${c}" data-value="${a}">Load More...</button></center>`}"not_found"==a?$product_status.html(b):$product_end.html(b)},filter_mobile=()=>{$(".ps-filter--mobile").on("click tap touch",a=>{reset_product(),filter_product_mobile(),canvas_mobile.hide()}),$(".ps-reset-filter").on("click tap touch",a=>{$("[name=subcat_fltr], [name=brand_fltr], [name=cat_chk_fltr]").prop("checked",!1),$(".ps-list--orderby-mobile").val("default"),reset_product(),filter_product_mobile(),canvas_mobile.hide()})},errProductList=a=>{shop_enddata("timeout"),$product_loader.hide()},errBestSeller=a=>{},bestSeller_ph=a=>document.getElementById("product-box-hb").innerHTML,canvas_mobile_el=document.getElementById("product-filter-mobile");var canvas_mobile=new bootstrap.Offcanvas(canvas_mobile_el);function search_recommended_product(){$(document).on("click",".btn-change-keyword",a=>{$(".search-header").select(),$(".search-header-mobile").select()}),$product_recommended.addClass("d-none"),"search"==segment_inf?(cat_inf=category_recommend.length>0?category_recommend.join():"1",subcat_inf="all",brandid_inf="all",keyword_inf="",shop_productlist("list","recommend","list"),$product_recommended.removeClass("d-none"),$show_all.removeClass("d-lg-block")):(subcat_inf="all",brandid_inf="all",shop_productlist(segment_inf,"recommend","list"),$product_recommended.removeClass("d-none"),$show_all.removeClass("d-lg-block"))}function shop_productlist(b="",c="default",d="list",a=!1){change_stage(segment_inf);let e=`${base_api_url}product-list`;segment_inf=b,orderby_inf=c,stage_inf=d,"official"==segment_inf&&(stage_inf="brand"),in_array(segment_inf,["tags","brand","search","on-discount","new-arrival"])&&(stage_inf=segment_inf),"search"==segment_inf?$show_all.removeClass("d-lg-block"):$show_all.addClass("d-lg-block"),paging_inf=!0==a?0:paging_inf,showall_inf=a,showall_inf&&$.blockUI(blokui_loader);let f=JSON.stringify({KCODE:cat_inf,SCODE:subcat_inf||"all",BCODE:brandid_inf||"all",BNAME:brand_inf,MORDR:orderby_inf,MSTGE:stage_inf,MKYWD:keyword_inf,MTAGS:tags_inf,MSGMN:segment_inf,MPAGE:paging_inf,token:api_token,signature:api_signature});currentPage_inf>0&&0==paging_inf-currentPage_inf&&paging_inf++,showall_inf?setTimeout(_=>{invoke_data("POST",e,dataType,content_json,f,beforeSend,onComplete,onSuccess,errProductList,dnProductList)},1e3):invoke_data("POST",e,dataType,content_json,f,beforeSend,onComplete,onSuccess,errProductList,dnProductList)}function dnProductList(a){if(_isFilter&&($product_box_list.html(""),$product_wide_list.html(""),_isFilter=!1),showall_inf&&$(".product-best-list").html(""),a){if(glob_shopmsg=a.shop_message,a.RC==rc_code){let b=a.result,e=a.totalRecords,d=a.segment,c="";switch(currentPage_inf=a.currentPage,1==paging_inf&&"recommend"!=orderby_inf&&reset_product(!1),!0==showall_inf&&($product_box_list.html(""),$product_wide_list.html("")),stage_inf){case"mapping":case"search":let f="search"==stage_inf;"search"==stage_inf&&($(".search-header-mobile, .search-header").val(decodeURIComponent(search_inf)),$product_info.html(`Menampilkan <span class="text-success">${e}</span> produk untuk "<span class="text-primary"><b>${decodeURIComponent(search_inf)}</b></span>"`)),"default"==orderby_inf?$.each(b,(e,a)=>{let b=a.KNAME,d=a.PPRNT;c="",$.each(d,(i,d)=>{let a=d.PPRNT,g=d.PCHLD,h=""==a?"-":a;if(c="",lastParent_inf!=a){let e="";f&&(e=""==a?b:` (${b})`),c+=`<div class="ps-product ps-product--wide ps-product--title">${h} ${e}</div>`}else lastCategory!=b&&f&&(c+=`<div class="ps-product ps-product--wide ps-product--title">${b}</div>`);$.each(g,(g,d)=>{let b=d.PCHLD,f=d.PLIST,e=""==b?"-":b;lastParent_inf!=a&&lastChild_inf==b&&(c+=`<div class="ps-product ps-product--wide ps-product--subtitle">${e}</div>`),lastChild_inf!=b&&(c+=`<div class="ps-product ps-product--wide ps-product--subtitle">${e}</div>`),c+=productlist(stage_inf,f),lastChild_inf=b}),$product_wide_list.append(c),lastParent_inf=a}),lastCategory=b}):(c+=productlist(stage_inf,b),$product_wide_list.append(c));break;case"brand":$.each(b,(f,a)=>{c="";let b=a.BNAME,d=a.KNAME,e=a.PLIST;b!=lastBrand&&(c+=`<div class="ps-product ps-product--wide ps-product--title text-uppercase">${b}</div>`),d!=lastCategory&&(c+=`<div class="ps-product ps-product--wide ps-product--subtitle">${d}</div>`),c+=productlist(stage_inf,e),lastBrand=b,$product_wide_list.append(c)});break;case"tags":void 0!==b[0].PLIST?(c="",$.each(b,(e,b)=>{let a=b.KNAME,d=b.PLIST;a!=lastCategory&&(c+=`<div class="ps-product ps-product--wide ps-product--title text-uppercase">${a}</div>`),c+=productlist(stage_inf,d),lastCategory=a}),$product_wide_list.append(c)):(c+=productlist(stage_inf,b),$product_wide_list.append(c));break;default:productlist(stage_inf,b)}a.segment.length>0&&(showall_inf?$product_pagetitle.html(d[1]):($product_pagetitle.html(d[1]),replaceURI(".product-title",`${base_url}${d[0]}`,d[1]))),paging_inf++}else"0003"===a.RC?($product_loader.hide(),1==paging_inf?(reset_product(!0),shop_enddata("not_found")):showall_inf&&0==paging_inf?($product_wide_list.html(""),shop_enddata("not_found")):shop_enddata("end")):(reset_product(!0),shop_enddata("not_found"));showall_inf?setTimeout(()=>{$.unblockUI()},2e3):swiper_bestseller.update(),$productLazy.productImgLazyLoad(),search_google()}$("body").whatsappOrders(glob_shopmsg)}function productlist(c="list",a=[]){let b="";return $.each(a,(k,d)=>{let h=d.PNAME,a=context_product(d,h);if(showall_inf){let e=handlebars_run(productWide_hb,a);if(1==d.PBEST){let i=handlebars_run(productWide_hb,a);$(".product-best-list").append(i)}switch(c){case"mapping":case"tags":case"search":case"brand":b+=e;break;default:$product_wide_list.append(e)}}else{let f=handlebars_run(productWide_hb,a),g=handlebars_run(productBox_hb,a);if(1==d.PBEST&&in_array(segment_inf,none_best)){let j=handlebars_run(productSlide_hb,a);$product_bestseller.append(j)}switch(c){case"mapping":case"tags":case"search":case"brand":b+=f,$product_box_list.append(g);break;default:$product_wide_list.append(f),$product_box_list.append(g)}}}),!0==showall_inf&&(shop_enddata("end"),$product_loader.hide()),$productLazy.productImgLazyLoad(),b}function product_filter(){let a=`${base_api_url}product-filter`,b=cat_inf,c=JSON.stringify({KCODE:b,SCODE:subcat_inf||"",MKYWD:""!=tags_inf?tags_inf:encodeURI(keyword_inf),MSTGE:stage_inf,BNAME:brand_inf,token:api_token,signature:api_signature});invoke_data("POST",a,dataType,content_json,c,beforeSend,onComplete,onSuccess,onError,d=>{if($(".category-filter, .category-chk-filter").html(""),$(".subcategory-filter").html(""),$(".brand-filter").html(""),d&&d.RC==rc_code){let a=d.result,b="",f=$.isArray(a.KFLTR)?a.KFLTR:[],g=$.isArray(a.SFLTR)?a.SFLTR:[],h=$.isArray(a.BFLTR)?a.BFLTR:[],c={category_fltr:f,subcat_fltr:g,brand_fltr:h},i=handlebars_run("subcat-fltr-hb",c),j=handlebars_run("brand-fltr-hb",c);in_array(segment_inf,fltr_cat_chk)?(b=handlebars_run("category-chk-fltr-hb",c),$(".category-chk-filter").removeClass("d-none"),$(".category-chk-filter").append(b)):(b=handlebars_run("category-fltr-hb",c),$(".category-chk-filter").addClass("d-none"),$(".category-filter").append(b)),$(".subcategory-filter").append(i),$(".brand-filter").append(j);let k=$product_filter_mobile.html(),l=k.replace(/cat_fltr-/g,"mcat_fltr-").replace(/sub_fltr-/g,"msub_fltr-").replace(/brand_fltr-/g,"mbrand_fltr-");if($product_filter_mobile.html(l),isNaN(cat_inf)||$(`[id="cat_fltr-${cat_inf}"], [id="mcat_fltr-${cat_inf}"]`).addClass("active"),isNaN(subcat_inf)||$(`[id="sub_fltr-${subcat_inf}"], [id="msub_fltr-${subcat_inf}"]`).attr({checked:"checked",disabled:"disabled"}),""!=brand_inf){let e=0;$('[name="brand_fltr"]').each((b,a)=>{$(a).next().text().toLowerCase()==brand_inf.toLowerCase()&&(e=$(a).val())}),$(`[id="brand_fltr-${e}"], [id="mbrand_fltr-${e}"]`).attr({checked:"checked",disabled:"disabled"})}}filter_more_(),filter_mobile()})}function bestseller_hide(a=!1){a?$container_bestseller.hide():$container_bestseller.show()}function bestseller_product(){let a=`${base_api_url}best-seller-product`,b=JSON.stringify({KCODE:cat_inf,BNAME:brand_inf,token:api_token,signature:api_signature});in_array(segment_inf,none_best)?bestseller_hide(!0):(bestseller_hide(!1),invoke_data("POST",a,dataType,content_json,b,"","","","",a=>{if(a){if(a.RC==rc_code){let b=a.result;glob_shopmsg=a.shop_message,$product_bestseller.html(""),$.each(b,(e,b)=>{let a=context_product(b);if(!0==showall_inf){let c=handlebars_run(productWide_hb,a);$(".product-best-list").append(c)}else{let d=handlebars_run(productSlide_hb,a);$product_bestseller.append(d)}}),showall_inf||swiper_bestseller.update()}else $(".bestseller-no-data").html('<h3 class="fw-light text-muted text-center">Best Seller produk tidak tersedia</h3>'),$(".ps-block__navigation").html(""),swiper_bestseller.destroy()}$("body").whatsappOrders(glob_shopmsg)}))}function reset_product(a=!1){$product_status.html(""),$product_wide_list.html("").fadeIn(400),$product_box_list.html("").fadeIn(400),$product_recommended.addClass("d-none"),!1==a&&(paging_inf>1&&scrollUp("product-top"),lastCategory="",lastParent_inf="",lastChild_inf="",currentPage_inf=0)}function filter_product(b=".ps-list--orderby"){let c=$(".subcategory-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),d=$(".brand-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),e=$(".category-chk-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),a=$(`${b}`).val();in_array(segment_inf,fltr_cat_chk)&&(cat_inf=e.join(",")),brandid_inf=d.join(","),"0"==(subcat_inf=c.join(","))&&(subcat_inf="all"),"0"==brandid_inf&&(brandid_inf="all"),stage_inf="default"==a?"mapping":"list",orderby_inf=a,paging_inf=1,shop_enddata(""),$product_status.html(""),jQuery.inArray(segment_inf,none_best)>=0&&swiper_bestseller.removeAllSlides(),$product_wide_list.html($skeleton_wide),$product_box_list.html($skeleton_box),$product_loader.show(),_isFilter=!0,shop_productlist(segment_inf,orderby_inf,stage_inf)}function filter_product_mobile(b=".ps-list--orderby-mobile"){let c=$(".subcategory-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),d=$(".brand-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),e=$(".category-chk-filter input:checkbox:checked").map(function(){return $(this).val()}).get(),a=$(`${b}`).val();in_array(segment_inf,fltr_cat_chk)&&(cat_inf=e.join(",")),brandid_inf=d.join(","),"0"==(subcat_inf=c.join(","))&&(subcat_inf="all"),"0"==brandid_inf&&(brandid_inf="all"),stage_inf="default"==a?"mapping":"list",orderby_inf=a,paging_inf=1,shop_enddata(""),$product_status.html(""),jQuery.inArray(segment_inf,none_best)>=0&&swiper_bestseller.removeAllSlides(),$product_wide_list.html($skeleton_wide),$product_box_list.html($skeleton_box),$product_loader.show(),_isFilter=!0,shop_productlist(segment_inf,orderby_inf,stage_inf)}function product_banner(d){let c=document.getElementById("product-banner-hb").innerHTML;if($(".product-banner").hide(),c){let b=$('[name="banner-data"]').text(),a=""==b?[]:JSON.parse(b);void 0!==a.banner?a.banner.length>0&&($(".product-banner").show(),$.each(a,(d,a)=>{let b={banner:a},c=handlebars_run("product-banner-hb",b);$(".product-banner").append(c)}),product_swiper.init()):$(".product-banner").hide()}}function view_banner(a="",b="",c=""){let d=`${base_api_url}banner`,e=JSON.stringify({MSTGE:a,KCODE:b,BNAME:c,token:api_token,signature:api_signature});invoke_data("POST",d,dataType,content_json,e,beforeSend,onComplete,onSuccess,onError,a=>{a&&a.RC==rc_code&&a.result})}function filter_more_(a){$("ul.filter-list").each(function(){$(this).children("li").length>7?($(this).children("li:lt(7)").show(),$(this).append('<button class="btn btn-link p-0 text-success loadMore mt-3">Lihat Selengkapnya</button>')):$("ul.filter-list").removeClass("filter-list")}),$("ul.filter-list").on("click",".loadMore",function(){$(this).parent(".filter-list").children("li:gt(6)").show(),$(this).removeClass("loadMore").addClass("loadLess").text("Sembunyikan")}),$("ul.filter-list").on("click",".loadLess",function(){$(this).parent(".filter-list").children("li:gt(6)").hide(),$(this).removeClass("loadLess").addClass("loadMore").text("Lihat Selengkapnya")}),$("figure.filter-check-1").each(function(){$(this).children("div").length>5?($(this).children("div:lt(5)").attr("style","display: flex;"),$(this).append('<button class="btn btn-link p-0 text-success loadMore mt-3">Lihat Selengkapnya</button>')):$("figure.filter-check-1").removeClass("filter-check-1")}),$("figure.filter-check-1").on("click",".loadMore",function(){$(this).parent(".filter-check-1").children("div:gt(4)").attr("style","display: flex;"),$(this).removeClass("loadMore").addClass("loadLess").text("Sembunyikan")}),$("figure.filter-check-1").on("click",".loadLess",function(){$(this).parent(".filter-check-1").children("div:gt(4)").hide(),$(this).removeClass("loadLess").addClass("loadMore").text("Lihat Selengkapnya")}),$("figure.filter-check-2").each(function(){$(this).children("div").length>5?($(this).children("div:lt(5)").attr("style","display: flex;"),$(this).append('<button class="btn btn-link p-0 text-success loadMore mt-3">Lihat Selengkapnya</button>')):$("figure.filter-check-2").removeClass("filter-check-2")}),$("figure.filter-check-2").on("click",".loadMore",function(){$(this).parent(".filter-check-2").children("div:gt(4)").attr("style","display: flex;"),$(this).removeClass("loadMore").addClass("loadLess").text("Sembunyikan")}),$("figure.filter-check-2").on("click",".loadLess",function(){$(this).parent(".filter-check-2").children("div:gt(4)").hide(),$(this).removeClass("loadLess").addClass("loadMore").text("Lihat Selengkapnya")}),$("figure.filter-check-3").each(function(){$(this).children("div").length>5?($(this).children("div:lt(5)").attr("style","display: flex;"),$(this).append('<button class="btn btn-link p-0 text-success loadMore mt-3">Lihat Selengkapnya</button>')):$("figure.filter-check-3").removeClass("filter-check-3")}),$("figure.filter-check-3").on("click",".loadMore",function(){$(this).parent(".filter-check-3").children("div:gt(4)").attr("style","display: flex;"),$(this).removeClass("loadMore").addClass("loadLess").text("Sembunyikan")}),$("figure.filter-check-3").on("click",".loadLess",function(){$(this).parent(".filter-check-3").children("div:gt(4)").hide(),$(this).removeClass("loadLess").addClass("loadMore").text("Lihat Selengkapnya")})}$(function(){$(".subcategory-filter, .brand-filter, .category-chk-filter").on("click tap touch","input",a=>{reset_product(),filter_product()}),$(document).on("click",".btn-change-keyword",a=>{$(".search-header").select(),$(".search-header-mobile").select()}),$product_end.on("click",".ps-product-end",a=>{"timeout"===$(a.target).data("value")&&($(a.target).hide(),$product_loader.show(),shop_enddata(),shop_productlist("category","default","list"))}),$(".ps-list--orderby").on("change",a=>{reset_product(),filter_product(".ps-list--orderby")})})